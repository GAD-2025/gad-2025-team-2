# 지원 내역 기능 구현에 필요한 데이터베이스 필드

## 문제: 구직자가 지원하면 고용주한테 지원한 사람이 안 보임

## 필요한 테이블 및 필드

### 1. `applications` 테이블 (이미 존재)
```sql
- applicationId (PRIMARY KEY) - 지원 ID
- seekerId (VARCHAR) - 구직자 ID (signup_users.id 참조)
- jobId (VARCHAR) - 공고 ID (jobs.id 참조)
- status (VARCHAR) - 지원 상태 ('applied', 'hired', 'rejected')
- appliedAt (DATETIME) - 지원 일시
- updatedAt (DATETIME) - 수정 일시
- hiredAt (DATETIME, NULL) - 채용 일시
```

### 2. `jobs` 테이블 (이미 존재)
```sql
- id (PRIMARY KEY) - 공고 ID
- employerId (VARCHAR) - 고용주 ID (employers.id 참조)
- title (VARCHAR) - 공고 제목
- ... (기타 필드)
```

### 3. `employers` 테이블 (이미 존재)
```sql
- id (PRIMARY KEY) - 고용주 ID
- businessNo (VARCHAR) - 사업자등록번호 (employer_profiles.id 참조)
- ... (기타 필드)
```

### 4. `employer_profiles` 테이블 (이미 존재)
```sql
- id (PRIMARY KEY) - 프로필 ID (사업자등록번호)
- user_id (VARCHAR) - 사용자 ID (signup_users.id 참조)
- ... (기타 필드)
```

### 5. `signup_users` 테이블 (이미 존재)
```sql
- id (PRIMARY KEY) - 사용자 ID
- role (VARCHAR) - 역할 ('job_seeker', 'employer')
- ... (기타 필드)
```

### 6. `job_seeker_profiles` 테이블 (이미 존재)
```sql
- id (PRIMARY KEY) - 구직자 프로필 ID
- user_id (VARCHAR) - 사용자 ID (signup_users.id 참조)
- ... (기타 필드)
```

## 데이터 흐름

1. **구직자가 지원할 때:**
   - `applications` 테이블에 레코드 생성
   - `seekerId`: 구직자의 `signup_users.id`
   - `jobId`: 지원한 공고의 `jobs.id`

2. **고용주가 지원 내역을 볼 때:**
   - `signup_users.id` (고용주) → `employer_profiles.user_id` → `employer_profiles.id`
   - `employer_profiles.id` → `employers.businessNo` → `employers.id`
   - `employers.id` → `jobs.employerId` → `jobs.id`
   - `jobs.id` → `applications.jobId` → 지원 내역 조회

## 확인해야 할 사항

1. **applications 테이블에 데이터가 제대로 들어가는지 확인**
   ```sql
   SELECT * FROM applications ORDER BY appliedAt DESC LIMIT 10;
   ```

2. **고용주와 공고 연결 확인**
   ```sql
   SELECT j.id, j.title, j.employerId, e.id as employer_id, e.businessNo
   FROM jobs j
   LEFT JOIN employers e ON j.employerId = e.id
   WHERE e.businessNo IN (
     SELECT id FROM employer_profiles 
     WHERE user_id = '고용주_user_id'
   );
   ```

3. **지원 내역 확인**
   ```sql
   SELECT a.*, j.title as job_title, j.employerId
   FROM applications a
   JOIN jobs j ON a.jobId = j.id
   WHERE j.employerId IN (
     SELECT id FROM employers 
     WHERE businessNo IN (
       SELECT id FROM employer_profiles 
       WHERE user_id = '고용주_user_id'
     )
   );
   ```

## 문제 해결 체크리스트

- [ ] `applications` 테이블에 지원 데이터가 들어가는지 확인
- [ ] `jobs.employerId`가 올바르게 설정되어 있는지 확인
- [ ] `employers` 테이블에 해당 고용주 레코드가 있는지 확인
- [ ] `employer_profiles`와 `employers` 연결이 올바른지 확인
- [ ] 백엔드 API `/applications?userId=고용주_id`가 올바르게 작동하는지 확인

